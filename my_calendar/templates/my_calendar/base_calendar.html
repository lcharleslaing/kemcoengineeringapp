{% extends "core/base.html" %}

{% block extra_head %}
<style>
  .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 0;
    border: 2px solid #d1d5db;
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  .calendar-day {
    min-height: 120px;
    background-color: hsl(var(--b1));
    padding: 0.5rem;
    border-right: 1px solid #d1d5db;
    border-bottom: 1px solid #d1d5db;
  }
  
  .calendar-day:nth-child(7n):not(.today) {
    border-right: none;
  }
  
  .calendar-day:hover:not(.today) {
    background-color: hsl(var(--b2));
  }
  
  .day-number {
    font-weight: 600;
    font-size: 0.875rem;
  }
  
  .calendar-day.today {
    background-color: #6366f1 !important;
    background-color: rgba(99, 102, 241, 0.15) !important;
    border-right: 1px solid #6366f1 !important;
    border-bottom: 1px solid #6366f1 !important;
    border-left: 2px solid #6366f1 !important;
    border-top: 2px solid #6366f1 !important;
  }
  
  .calendar-day.today:hover {
    background-color: rgba(99, 102, 241, 0.25) !important;
  }
  
  .event-chip {
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    margin-top: 0.25rem;
    border-radius: 0.25rem;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .week-day-header {
    background-color: hsl(var(--b2));
    padding: 0.75rem;
    font-weight: 600;
    text-align: center;
    border-right: 1px solid #d1d5db;
    border-bottom: 2px solid #d1d5db;
  }
  
  .week-day-header:nth-child(7) {
    border-right: none;
  }
  
  .hour-row {
    border-bottom: 1px solid hsl(var(--b3));
    padding: 0.5rem;
    min-height: 60px;
  }
  
  .event-block {
    padding: 0.5rem;
    border-radius: 0.25rem;
    margin-bottom: 0.5rem;
    border-left: 4px solid hsl(var(--p));
  }
</style>
{% endblock %}

{% block content %}
{% include 'navbar.html' %}

<div class="container mx-auto p-4 lg:p-6">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
    <div>
      <h1 class="text-3xl font-bold">{% block calendar_title %}My Calendar{% endblock %}</h1>
      <p class="text-base-content/70 mt-1">{% block calendar_subtitle %}Manage your events and schedule{% endblock %}</p>
    </div>
    
    <div class="flex gap-2">
      <a href="{% url 'event_create' %}" class="btn btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
        New Event
      </a>
    </div>
  </div>

  <!-- View Tabs -->
  <div class="tabs tabs-boxed mb-6">
    <a href="{% url 'calendar_month' %}" class="tab {% if view_type == 'month' %}tab-active{% endif %}">Month</a>
    <a href="{% url 'calendar_week' %}" class="tab {% if view_type == 'week' %}tab-active{% endif %}">Week</a>
    <a href="{% url 'calendar_day' %}" class="tab {% if view_type == 'day' %}tab-active{% endif %}">Day</a>
    <a href="{% url 'event_list' %}" class="tab {% if view_type == 'list' %}tab-active{% endif %}">List</a>
  </div>

  <!-- Messages -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} mb-4">
        <span>{{ message }}</span>
      </div>
    {% endfor %}
  {% endif %}

  <!-- Calendar Content -->
  {% block calendar_content %}{% endblock %}
</div>
{% endblock %}
