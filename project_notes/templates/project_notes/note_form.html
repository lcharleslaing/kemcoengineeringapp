{% extends "core/base.html" %}

{% block title %}{% if edit %}Edit Note{% else %}Add Note{% endif %} - Job #{{ job.job_number }}{% endblock %}

{% block content %}
{% include 'navbar.html' %}

<div class="container mx-auto p-6">
  <div class="mb-6">
    <h1 class="text-3xl font-bold">{% if edit %}Edit Note{% else %}Add Note{% endif %}</h1>
    <p class="text-base-content/70 mt-1">Job #{{ job.job_number }} - {{ job.customer_name|default:"No Customer" }}</p>
  </div>

  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <form method="post">
        {% csrf_token %}
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text">Title (optional)</span>
          </label>
          <input type="text" name="title" class="input input-bordered" placeholder="Note title" value="{% if edit %}{{ note.title }}{% endif %}">
        </div>
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text">Content *</span>
          </label>
          <textarea name="content" class="textarea textarea-bordered h-32" placeholder="Enter note content..." required>{% if edit %}{{ note.content }}{% endif %}</textarea>
        </div>
        <div class="form-control mb-4">
          <label class="label">
            <span class="label-text">Note Type</span>
          </label>
          <select name="note_type" class="select select-bordered">
            <option value="general" {% if edit and note.note_type == 'general' %}selected{% endif %}>General</option>
            <option value="equipment" {% if edit and note.note_type == 'equipment' %}selected{% endif %}>Equipment</option>
            <option value="line_items" {% if edit and note.note_type == 'line_items' %}selected{% endif %}>Line Items</option>
            <option value="other" {% if edit and note.note_type == 'other' %}selected{% endif %}>Other</option>
          </select>
        </div>
        <div class="flex gap-2">
          <button type="submit" class="btn btn-primary">{% if edit %}Update Note{% else %}Add Note{% endif %}</button>
          <a href="{% url 'project_notes:job_detail' job.job_number %}" class="btn btn-outline">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

